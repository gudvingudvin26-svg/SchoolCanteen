<!DOCTYPE html>
<html>
<head>
    <title>–®–∫–æ–ª—å–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
        <div class="container">
            <a class="navbar-brand navbar-brand-custom" href="{% url 'home' %}">üçΩÔ∏è –®–∫–æ–ª—å–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è</a>
            <div class="navbar-nav ms-auto">
                {% if user.is_authenticated %}
                    <span class="nav-link text-white">{{ user.first_name }} {{ user.last_name }}</span>
                    <a class="nav-link" href="{% url 'notification_list' %}">
                        üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                        {% with unread_count=user.notifications.filter.is_read.count %}
                            {% if unread_count > 0 %}
                                <span class="badge bg-danger">{{ unread_count }}</span>
                            {% endif %}
                        {% endwith %}
                    </a>
                    <a class="nav-link" href="{% url 'logout' %}">üö™ –í—ã–π—Ç–∏</a>
                {% else %}
                    <a class="nav-link" href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
                    <a class="nav-link" href="{% url 'register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        {% if user.is_authenticated %}
            <div class="user-card">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.first_name }}!</h2>
                        <p class="mb-0">
                            <strong>{{ user.get_role_display }}</strong> - {{ user.email }}
                            {% if user.role == 'student' %}
                                <br>–ö–ª–∞—Å—Å: {{ user.class_number }} | –ë–∞–ª–∞–Ω—Å: <span class="price-tag">{{ user.balance }} ‚ÇΩ</span>
                            {% endif %}
                        </p>
                    </div>
                    <div class="col-md-4 text-end">
                        {% if user.role == 'student' %}
                            <a href="{% url 'order_history' %}" class="btn btn-light btn-custom">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
                        {% elif user.role == 'cook' %}
                            <a href="{% url 'cook_dashboard' %}" class="btn btn-light btn-custom">–ü–∞–Ω–µ–ª—å –ø–æ–≤–∞—Ä–∞</a>
                        {% elif user.role == 'admin' %}
                            <a href="{% url 'admin_dashboard' %}" class="btn btn-light btn-custom">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a>
                        {% endif %}
                    </div>
                </div>
            </div>

            <h3 class="mb-4">–í—ã–±—Ä–∞—Ç—å —Å—Å—ã–ª–∫–∏</h3>

            <div class="row">
                {% if user.role == 'student' %}
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üìÖ</div>
                                <h5 class="card-title">–ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é</h5>
                                <p class="card-text text-muted">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–ª—é–¥–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å</p>
                                <a href="{% url 'menu_list' %}" class="btn btn-primary btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üìã</div>
                                <h5 class="card-title">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h5>
                                <p class="card-text text-muted">–ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫ –∏ —Å—Ç–∞—Ç—É—Å—ã</p>
                                <a href="{% url 'order_history' %}" class="btn btn-primary btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üé´</div>
                                <h5 class="card-title">–ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã</h5>
                                <p class="card-text text-muted">–í—ã–≥–æ–¥–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–∏–µ</p>
                                <a href="{% url 'subscription_list' %}" class="btn btn-primary btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üë§</div>
                                <h5 class="card-title">–ü—Ä–æ—Ñ–∏–ª—å</h5>
                                <p class="card-text text-muted">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ, –∞–ª–ª–µ—Ä–≥–µ–Ω—ã –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è</p>
                                <a href="{% url 'profile' %}" class="btn btn-primary btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                {% if user.role == 'cook' %}
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üìä</div>
                                <h5 class="card-title">–ü–∞–Ω–µ–ª—å –ø–æ–≤–∞—Ä–∞</h5>
                                <p class="card-text text-muted">–£—á–µ—Ç –≤—ã–¥–∞–Ω–Ω—ã—Ö –±–ª—é–¥ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</p>
                                <a href="{% url 'cook_dashboard' %}" class="btn btn-success btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üì¶</div>
                                <h5 class="card-title">–°–∫–ª–∞–¥</h5>
                                <p class="card-text text-muted">–ö–æ–Ω—Ç—Ä–æ–ª—å –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</p>
                                <a href="{% url 'inventory_list' %}" class="btn btn-success btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üìù</div>
                                <h5 class="card-title">–ó–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É</h5>
                                <p class="card-text text-muted">–°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫</p>
                                <a href="{% url 'purchase_request_list' %}" class="btn btn-warning btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                {% if user.role == 'admin' %}
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üìà</div>
                                <h5 class="card-title">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h5>
                                <p class="card-text text-muted">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–ª–∞—Ç –∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏</p>
                                <a href="{% url 'admin_dashboard' %}" class="btn btn-info btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üìã</div>
                                <h5 class="card-title">–ó–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É</h5>
                                <p class="card-text text-muted">–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –æ—Ç –ø–æ–≤–∞—Ä–æ–≤</p>
                                <a href="{% url 'purchase_request_list' %}" class="btn btn-warning btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <div class="feature-icon">üìä</div>
                                <h5 class="card-title">–û—Ç—á–µ—Ç—ã</h5>
                                <p class="card-text text-muted">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏</p>
                                <a href="{% url 'reports_dashboard' %}" class="btn btn-primary btn-custom">–û—Ç–∫—Ä—ã—Ç—å</a>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        {% else %}
            <div class="row justify-content-center mt-5">
                <div class="col-md-8 text-center">
                    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∫–æ–ª—å–Ω–æ–π —Å—Ç–æ–ª–æ–≤–æ–π</h1>
                    <p class="lead mt-3">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–∏—Ç–∞–Ω–∏—è</p>
                    <div class="mt-4">
                        <a href="{% url 'login' %}" class="btn btn-primary btn-lg btn-custom me-2">–í–æ–π—Ç–∏</a>
                        <a href="{% url 'register' %}" class="btn btn-outline-primary btn-lg btn-custom">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

    <footer class="footer-custom">
        <div class="container text-center">
            <p class="mb-0">¬© 2026 –®–∫–æ–ª—å–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è. –ö–æ–º–∞–Ω–¥–∞ 875.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>